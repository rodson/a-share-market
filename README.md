# Aè‚¡å¸‚åœºè¡Œä¸šæ¿å—æ•°æ®å±•ç¤ºç³»ç»Ÿ

ä¸€ä¸ªåŸºäºReactçš„Aè‚¡å¸‚åœºæ•°æ®å¯è§†åŒ–åº”ç”¨ï¼Œå®Œå…¨å¤åˆ»ä¸“ä¸šé‡‘èæ•°æ®å±•ç¤ºç•Œé¢ï¼Œæ”¯æŒæŸ¥è¯¢å†å²æ•°æ®å¹¶å¯¼å‡ºä¸ºå›¾ç‰‡ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“… **æ—¥æœŸé€‰æ‹©**ï¼šæ”¯æŒé€‰æ‹©ä»»æ„æ—¥æœŸæŸ¥è¯¢å†å²æ•°æ®
- ğŸ“ˆ **è‚¡å€ºåˆ©å·®åˆ†æ**ï¼šå±•ç¤º2005-2025å¹´è‚¡å€ºåˆ©å·®å’Œä¸‡å¾—å…¨Aå†å²èµ°åŠ¿ï¼Œæä¾›PB/PEä¼°å€¼åˆ†ä½
- ğŸ“Š **å¸‚åœºæ¦‚å†µ**ï¼šå±•ç¤ºABè‚¡æ¶¨è·Œç»Ÿè®¡ï¼ˆæ¶¨åœã€ä¸Šæ¶¨ã€å¹³ç›˜ã€ä¸‹è·Œã€è·Œåœï¼‰å’Œä¸»è¦æŒ‡æ•°è¡¨ç°
- ğŸ¢ **æ¿å—æ•°æ®**ï¼šå®Œæ•´å±•ç¤º11å¤§ç±»æ¿å—æ•°æ®
  - æ¦‚å¿µæ¿å—ï¼ˆä¸Šè¯50ã€æ²ªæ·±300ã€ä¸­è¯500ç­‰ï¼‰
  - é“¶è¡Œæ¿å—ï¼ˆå·¥å•†é“¶è¡Œã€è¯åˆ¸ã€ä¿é™©ç­‰ï¼‰
  - å·¥ä¸šæ¿å—
  - åŸææ–™æ¿å—ï¼ˆé’¢é“ã€æœ‰è‰²é‡‘å±ã€é»„é‡‘ç­‰ï¼‰
  - å¯é€‰æ¶ˆè´¹æ¿å—ï¼ˆæ±½è½¦ã€æ–°èƒ½æºæ±½è½¦ã€é”‚ç”µæ± ç­‰ï¼‰
  - æ—¥å¸¸æ¶ˆè´¹æ¿å—ï¼ˆç™½é…’ã€é£Ÿå“é¥®æ–™ã€å†œä¸šç­‰ï¼‰
  - åŒ»ç–—ä¿å¥æ¿å—ï¼ˆåŒ»ç–—å™¨æ¢°ã€åŒ»è¯ã€ä¸­è¯ç­‰ï¼‰
  - ä¿¡æ¯æŠ€æœ¯æ¿å—ï¼ˆåŠå¯¼ä½“ã€èŠ¯ç‰‡ã€æ¶ˆè´¹ç”µå­ç­‰ï¼‰
  - ç”µä¿¡æœåŠ¡æ¿å—
  - å…¬ç”¨äº‹ä¸šæ¿å—ï¼ˆç”µåŠ›ã€æ°´ç”µç­‰ï¼‰
  - æˆ¿åœ°äº§æ¿å—
- ğŸ“ˆ **è¯¦ç»†ä¿¡æ¯**ï¼šæ¯ä¸ªæ¿å—æ˜¾ç¤ºæ¶¨è·Œå¹…ã€é¢†æ¶¨è‚¡ã€é¢†è·Œè‚¡ã€æ¶¨è·Œå®¶æ•°
- ğŸ’¾ **å›¾ç‰‡å¯¼å‡º**ï¼šæ”¯æŒå°†æ•°æ®é¡µé¢å¯¼å‡ºä¸ºPNGå›¾ç‰‡
- ğŸ¨ **ä¸“ä¸šç•Œé¢**ï¼šå®Œå…¨å¤åˆ»ä¸“ä¸šé‡‘èæ•°æ®å±•ç¤ºç•Œé¢ï¼Œæ·±ç°è‰²ä¸»é¢˜ï¼Œçº¢æ¶¨ç»¿è·Œ

## æ•°æ®æ¥æº

æœ¬é¡¹ç›®ä½¿ç”¨ **AKShare** ä½œä¸ºä¸»è¦æ•°æ®æºï¼š

### AKShare - å…è´¹å¼€æºé‡‘èæ•°æ®æ¥å£

- âœ… **å®Œå…¨å…è´¹** - æ— éœ€ä»˜è´¹è®¢é˜…
- âœ… **å¼€æºé¡¹ç›®** - GitHub 10k+ æ˜Ÿæ ‡
- âœ… **æ•°æ®ä¸°å¯Œ** - è¦†ç›–è‚¡ç¥¨ã€åŸºé‡‘ã€å€ºåˆ¸ã€æœŸè´§ç­‰
- âœ… **æ˜“äºä½¿ç”¨** - ç®€å•çš„ Python API
- âœ… **å®æ—¶æ›´æ–°** - æ•°æ®æºç¨³å®šå¯é 

**å®˜æ–¹ç½‘ç«™**: https://akshare.akfamily.xyz/

**æ•°æ®æ¥å£è¯´æ˜**: è¯¦è§ `server/akshare_api/README.md`

> æ³¨æ„ï¼šAKShare æ•°æ®æ¥è‡ªå…¬å¼€æ•°æ®æºï¼ˆä¸œæ–¹è´¢å¯Œã€æ–°æµªè´¢ç»ç­‰ï¼‰ï¼Œé€‚åˆä¸ªäººé¡¹ç›®å’Œå­¦ä¹ ä½¿ç”¨ã€‚å¦‚éœ€æœºæ„çº§æ•°æ®è´¨é‡ï¼Œå»ºè®®ä½¿ç”¨ Windã€Tushare ç­‰ä¸“ä¸šæ•°æ®æœåŠ¡ã€‚

## æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**ï¼šReact 18
- **UIç»„ä»¶åº“**ï¼šMaterial-UI (MUI)
- **æ„å»ºå·¥å…·**ï¼šVite
- **åç«¯æœåŠ¡**ï¼šExpress.js
- **å›¾ç‰‡å¯¼å‡º**ï¼šhtml2canvas
- **æ—¥æœŸå¤„ç†**ï¼šdayjs

## å®‰è£…å’Œè¿è¡Œ

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd a-share-market
```

### 2. å®‰è£… Node.js ä¾èµ–

```bash
npm install
```

### 3. å®‰è£… Python ä¾èµ–

```bash
# å®‰è£… AKShare å’Œ pandas
npm run setup:akshare

# æˆ–æ‰‹åŠ¨å®‰è£…
pip3 install akshare pandas
```

### 4. éªŒè¯ AKShare å®‰è£…

```bash
# æµ‹è¯•æ•°æ®æ¥å£
npm run test:akshare
```

### 5. å¯åŠ¨åç«¯æœåŠ¡

```bash
npm run server
```

åç«¯æœåŠ¡å°†è¿è¡Œåœ¨ `http://localhost:3001`

### 6. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨

åœ¨æ–°çš„ç»ˆç«¯çª—å£ä¸­è¿è¡Œï¼š

```bash
npm run dev
```

å‰ç«¯åº”ç”¨å°†è¿è¡Œåœ¨ `http://localhost:3000`

### 7. è®¿é—®åº”ç”¨

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ `http://localhost:3000`

## ä½¿ç”¨è¯´æ˜

1. **é€‰æ‹©æ—¥æœŸ**ï¼šç‚¹å‡»æ—¥æœŸé€‰æ‹©å™¨ï¼Œé€‰æ‹©è¦æŸ¥è¯¢çš„æ—¥æœŸ
2. **æŸ¥è¯¢æ•°æ®**ï¼šç‚¹å‡»"æŸ¥è¯¢æ•°æ®"æŒ‰é’®è·å–å¸‚åœºæ•°æ®
3. **æŸ¥çœ‹æ•°æ®**ï¼šé¡µé¢å°†å±•ç¤ºå¸‚åœºæ¦‚å†µå’Œå„æ¿å—è¯¦ç»†æ•°æ®
4. **å¯¼å‡ºå›¾ç‰‡**ï¼šç‚¹å‡»"å¯¼å‡ºå›¾ç‰‡"æŒ‰é’®ï¼Œå°†å½“å‰é¡µé¢ä¿å­˜ä¸ºPNGå›¾ç‰‡

## é¡¹ç›®ç»“æ„

```
a-share-market/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ MarketOverview.jsx   # å¸‚åœºæ¦‚å†µç»„ä»¶
â”‚   â”‚   â””â”€â”€ SectorTable.jsx      # æ¿å—æ•°æ®è¡¨æ ¼ç»„ä»¶
â”‚   â”œâ”€â”€ services/            # APIæœåŠ¡
â”‚   â”‚   â””â”€â”€ api.js          # å‰ç«¯APIè°ƒç”¨
â”‚   â”œâ”€â”€ App.jsx             # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ main.jsx            # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ index.css           # å…¨å±€æ ·å¼
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ akshare_api/        # AKShareæ•°æ®æ¥å£
â”‚   â”‚   â”œâ”€â”€ get_indices.py          # è·å–æŒ‡æ•°æ•°æ®
â”‚   â”‚   â”œâ”€â”€ get_market_overview.py  # è·å–å¸‚åœºæ¦‚å†µ
â”‚   â”‚   â”œâ”€â”€ get_sectors.py          # è·å–æ¿å—æ•°æ®
â”‚   â”‚   â”œâ”€â”€ get_equity_bond_spread.py # è·å–è‚¡å€ºåˆ©å·®
â”‚   â”‚   â””â”€â”€ README.md               # APIä½¿ç”¨è¯´æ˜
â”‚   â”œâ”€â”€ index.js            # ExpressæœåŠ¡å™¨
â”‚   â””â”€â”€ dataService.js      # æ•°æ®è·å–æœåŠ¡
â”œâ”€â”€ index.html              # HTMLæ¨¡æ¿
â”œâ”€â”€ vite.config.js          # Viteé…ç½®
â””â”€â”€ package.json            # é¡¹ç›®é…ç½®
```

## APIæ¥å£è¯´æ˜

### GET /api/market-data

è·å–æŒ‡å®šæ—¥æœŸçš„å¸‚åœºæ•°æ®

**è¯·æ±‚å‚æ•°ï¼š**
- `date` (string): æ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DD

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "date": "2024-01-15",
  "overview": {
    "upLimit": 25,
    "up": 1523,
    "flat": 156,
    "down": 1342,
    "downLimit": 18,
    "changePercent": 0.85,
    "indices": [...]
  },
  "sectors": [...]
}
```

## æ•°æ®æ¥å£æ‰©å±•

æœ¬é¡¹ç›®é»˜è®¤ä½¿ç”¨ **AKShare**ï¼Œè¿™æ˜¯ä¸€ä¸ªå…è´¹å¼€æºçš„æ•°æ®æºï¼Œé€‚åˆå¤§å¤šæ•°ä½¿ç”¨åœºæ™¯ã€‚

### å¦‚éœ€æ›´æ¢æ•°æ®æº

å¦‚éœ€æ¥å…¥å…¶ä»–é‡‘èæ•°æ®APIï¼Œå¯ä»¥ä¿®æ”¹ `server/dataService.js` æ–‡ä»¶ï¼š

#### 1. ä½¿ç”¨ Wind APIï¼ˆæœºæ„çº§æ•°æ®ï¼‰

Wind æ˜¯ä¸“ä¸šçš„é‡‘èæ•°æ®ç»ˆç«¯ï¼Œæä¾›æœºæ„çº§æ•°æ®è´¨é‡ï¼š

```bash
# éœ€è¦è´­ä¹° Wind è®¢é˜…å¹¶å®‰è£…ç»ˆç«¯
pip install WindPy
```

è¯¦è§ `server/wind_api/README.md`ï¼ˆå·²ä¿ç•™ä¾›å‚è€ƒï¼‰

#### 2. ä½¿ç”¨ Tushareï¼ˆæ¨èä»˜è´¹æ–¹æ¡ˆï¼‰

Tushare æä¾›é«˜è´¨é‡çš„é‡‘èæ•°æ®æ¥å£ï¼š

```python
# éœ€è¦å…ˆæ³¨å†Œè·å– token: https://tushare.pro/
import tushare as ts
ts.set_token('your_token_here')
pro = ts.pro_api()
```

#### 3. ç»§ç»­ä½¿ç”¨ AKShare

æ— éœ€ä»»ä½•é…ç½®ï¼Œå¼€ç®±å³ç”¨ï¼š

```bash
npm run setup:akshare
npm run server
```

## æ³¨æ„äº‹é¡¹

1. **AKShare æ•°æ®æº**ï¼š
   - æ•°æ®æ¥è‡ªå…¬å¼€APIï¼ˆä¸œæ–¹è´¢å¯Œã€æ–°æµªè´¢ç»ç­‰ï¼‰
   - å®æ—¶æ•°æ®å¯èƒ½æœ‰1-5åˆ†é’Ÿå»¶è¿Ÿ
   - å…è´¹ä½¿ç”¨ï¼Œæ— è®¿é—®é¢‘ç‡é™åˆ¶
   - é€‚åˆä¸ªäººé¡¹ç›®å’Œå­¦ä¹ ä½¿ç”¨

2. **ç½‘ç»œè¦æ±‚**ï¼š
   - éœ€è¦èƒ½è®¿é—®å›½å†…é‡‘èæ•°æ®ç½‘ç«™
   - æŸäº›ç½‘ç»œç¯å¢ƒå¯èƒ½éœ€è¦é…ç½®ä»£ç†

3. **Python ç¯å¢ƒ**ï¼š
   - éœ€è¦ Python 3.7 æˆ–æ›´é«˜ç‰ˆæœ¬
   - macOS ç”¨æˆ·å¯èƒ½éœ€è¦é™çº§ urllib3ï¼š`pip3 install 'urllib3<2.0'`
   - å»ºè®®ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒç®¡ç†ä¾èµ–

4. **æµè§ˆå™¨å…¼å®¹æ€§**ï¼š
   - æ¨èä½¿ç”¨ Chromeã€Firefoxã€Edge ç­‰ç°ä»£æµè§ˆå™¨
   - å¯¼å‡ºå›¾ç‰‡åŠŸèƒ½åœ¨æŸäº›æµè§ˆå™¨å¯èƒ½éœ€è¦ç”¨æˆ·æˆæƒ

5. **æ•…éšœæ’é™¤**ï¼š
   - é‡åˆ°é—®é¢˜è¯·æŸ¥çœ‹ [æ•…éšœæ’é™¤æŒ‡å—](TROUBLESHOOTING.md)
   - å¸¸è§é—®é¢˜éƒ½æœ‰è¯¦ç»†çš„è§£å†³æ–¹æ¡ˆ

## å¼€å‘è®¡åˆ’

- [x] ä½¿ç”¨ AKShare ä½œä¸ºå…è´¹æ•°æ®æº
- [x] æ”¯æŒè‚¡å€ºåˆ©å·®åˆ†æ
- [x] å®Œæ•´çš„æ¿å—æ•°æ®å±•ç¤º
- [ ] æ·»åŠ æ•°æ®ç¼“å­˜æœºåˆ¶
- [ ] æ·»åŠ æ›´å¤šæŠ€æœ¯æŒ‡æ ‡
- [ ] æ”¯æŒè‡ªå®šä¹‰æ¿å—åˆ†ç±»
- [ ] æ·»åŠ æ•°æ®å¯¹æ¯”åŠŸèƒ½
- [ ] ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ–
- [ ] æ”¯æŒå¤šæ•°æ®æºåˆ‡æ¢

## License

MIT
